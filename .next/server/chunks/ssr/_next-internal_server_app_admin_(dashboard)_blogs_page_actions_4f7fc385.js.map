{"version":3,"sources":["../../../../src/app/admin/%28dashboard%29/blogs/actions.ts"],"sourcesContent":["\"use server\";\r\n\r\nimport { prisma } from \"@/core/prisma\";\r\nimport { revalidatePath } from \"next/cache\";\r\n\r\nexport async function createCategory(name: string) {\r\n    try {\r\n        if (!name.trim()) return { error: \"Name is required\" };\r\n\r\n        const slug = name.toLowerCase().replace(/[^a-z0-9]+/g, \"-\").replace(/(^-|-$)+/g, \"\");\r\n\r\n        await prisma.blogCategory.create({\r\n            data: { name, slug }\r\n        });\r\n\r\n        revalidatePath(\"/admin/blogs\");\r\n        revalidatePath(\"/blog\");\r\n        return { success: true };\r\n    } catch (e: any) {\r\n        if (e.code === 'P2002') return { error: \"Category already exists\" };\r\n        return { error: \"Failed to create category\" };\r\n    }\r\n}\r\n\r\nexport async function deleteCategory(id: string) {\r\n    try {\r\n        await prisma.blogCategory.delete({ where: { id } });\r\n\r\n        revalidatePath(\"/admin/blogs\");\r\n        revalidatePath(\"/blog\");\r\n        return { success: true };\r\n    } catch (e) {\r\n        return { error: \"Failed to delete category (it may contain posts)\" };\r\n    }\r\n}\r\n\r\nexport async function deletePost(id: string) {\r\n    try {\r\n        await prisma.blogPost.delete({ where: { id } });\r\n        revalidatePath(\"/admin/blogs\");\r\n        revalidatePath(\"/blog\");\r\n        return { success: true };\r\n    } catch (e) {\r\n        return { error: \"Failed to delete post\" };\r\n    }\r\n}\r\n\r\nexport async function togglePublish(id: string, published: boolean) {\r\n    try {\r\n        await prisma.blogPost.update({\r\n            where: { id },\r\n            data: { published }\r\n        });\r\n        revalidatePath(\"/admin/blogs\");\r\n        revalidatePath(\"/blog\");\r\n        return { success: true };\r\n    } catch (e) {\r\n        return { error: \"Failed to toggle status\" };\r\n    }\r\n}\r\n"],"names":[],"mappings":"yDAEA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAEO,eAAe,EAAe,CAAY,EAC7C,GAAI,CACA,GAAI,CAAC,EAAK,IAAI,GAAI,MAAO,CAAE,MAAO,kBAAmB,EAErD,IAAM,EAAO,EAAK,WAAW,GAAG,OAAO,CAAC,cAAe,KAAK,OAAO,CAAC,YAAa,IAQjF,OANA,MAAM,EAAA,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC,CAC7B,KAAM,MAAE,EAAM,MAAK,CACvB,GAEA,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,gBACf,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,SACR,CAAE,SAAS,CAAK,CAC3B,CAAE,MAAO,EAAQ,CACb,GAAI,AAAW,YAAT,IAAI,CAAc,MAAO,CAAE,MAAO,yBAA0B,EAClE,MAAO,CAAE,MAAO,2BAA4B,CAChD,CACJ,CAEO,eAAe,EAAe,CAAU,EAC3C,GAAI,CAKA,OAJA,MAAM,EAAA,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC,CAAE,MAAO,IAAE,CAAG,CAAE,GAEjD,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,gBACf,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,SACR,CAAE,SAAS,CAAK,CAC3B,CAAE,MAAO,EAAG,CACR,MAAO,CAAE,MAAO,kDAAmD,CACvE,CACJ,CAEO,eAAe,EAAW,CAAU,EACvC,GAAI,CAIA,OAHA,MAAM,EAAA,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAE,MAAO,IAAE,CAAG,CAAE,GAC7C,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,gBACf,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,SACR,CAAE,QAAS,EAAK,CAC3B,CAAE,MAAO,EAAG,CACR,MAAO,CAAE,MAAO,uBAAwB,CAC5C,CACJ,CAEO,eAAe,EAAc,CAAU,CAAE,CAAkB,EAC9D,GAAI,CAOA,OANA,MAAM,EAAA,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CACzB,MAAO,IAAE,CAAG,EACZ,KAAM,WAAE,CAAU,CACtB,GACA,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,gBACf,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,SACR,CAAE,SAAS,CAAK,CAC3B,CAAE,MAAO,EAAG,CACR,MAAO,CAAE,MAAO,yBAA0B,CAC9C,CACJ,2CAtDsB,EAmBA,EAYA,EAWA,IA1CA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA,MAmBA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA,MAYA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA,MAWA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA"}