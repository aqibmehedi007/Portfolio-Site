{"version":3,"sources":["../../../../../../GitHub/Portfolio-Site/src/app/admin/%28dashboard%29/settings/actions.ts"],"sourcesContent":["\"use server\";\r\n\r\nimport { prisma } from \"@/core/prisma\";\r\nimport { revalidatePath } from \"next/cache\";\r\n\r\nexport async function saveSettings(formData: FormData) {\r\n    try {\r\n        const payload = Object.fromEntries(formData.entries());\r\n\r\n        for (const [key, value] of Object.entries(payload)) {\r\n            if (typeof value === \"string\") {\r\n                await prisma.setting.upsert({\r\n                    where: { key },\r\n                    update: { value, updatedAt: new Date() },\r\n                    create: { key, value, description: `Autogenerated for ${key}` }\r\n                });\r\n            }\r\n        }\r\n\r\n        revalidatePath('/admin/settings');\r\n        return { success: true };\r\n    } catch (error) {\r\n        console.error(\"Settings save error:\", error);\r\n        return { success: false, error: \"Failed to save settings\" };\r\n    }\r\n}\r\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,OAEO,eAAe,EAAa,CAAkB,EACjD,GAAI,CACA,IAAM,EAAU,OAAO,WAAW,CAAC,EAAS,OAAO,IAEnD,IAAK,GAAM,CAAC,EAAK,EAAM,GAAI,OAAO,OAAO,CAAC,GACjB,MAD2B,IAC5C,AAA2B,OAApB,GACP,MAAM,EAAA,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,CACxB,MAAO,KAAE,CAAI,EACb,OAAQ,OAAE,EAAO,UAAW,IAAI,IAAO,EACvC,OAAQ,KAAE,EAAK,QAAO,YAAa,CAAC,kBAAkB,EAAE,EAAA,CAAK,AAAC,CAClE,GAKR,MADA,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,mBACR,CAAE,SAAS,CAAK,CAC3B,CAAE,MAAO,EAAO,CAEZ,OADA,QAAQ,KAAK,CAAC,uBAAwB,GAC/B,CAAE,SAAS,EAAO,MAAO,yBAA0B,CAC9D,CACJ,2CApBsB,IAAA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA"}